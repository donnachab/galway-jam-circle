<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Galway Jam Circle - Official Website</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/swiper/swiper-bundle.min.css"
    />
    
    
  <script src="https://cdn.tailwindcss.com"></script>
    <style>
      :root {
        --primary-color: #371087; /* Correct Purple */
        --accent-color: #f3ead3; /* Warm Cream */
        --background-color: #ffffff;
        --text-dark: #1f2937;
        --text-light: #ffffff;
      }
      body {
        font-family: "Inter", sans-serif;
        background-color: var(--background-color);
        color: var(--text-dark);
      }
      .bg-primary {
        background-color: var(--primary-color);
      }
      .text-primary {
        color: var(--primary-color);
      }
      .bg-accent {
        background-color: var(--accent-color);
      }
      .text-accent {
        color: var(--accent-color);
      }
      .border-primary {
        border-color: var(--primary-color);
      }
      .admin-controls,
      .admin-controls-inline {
        display: none;
      }
      body.admin-mode .admin-controls {
        display: block;
      }
      body.admin-mode .admin-controls-inline {
        display: inline-flex;
      }
      #add-jam-form,
      #add-event-form,
      #add-photo-form,
      #edit-cover-photo-form,
      #edit-featured-video-form,
      #venue-management-section,
      #add-community-form {
        display: none;
      }
      .jam-cancelled {
        background-color: #fee2e2 !important;
      }
      .jam-cancelled .jam-info {
        text-decoration: line-through;
      }
      .jam-special-day {
        border-color: #fbbf24 !important;
        border-width: 2px;
      } /* Amber for special days */
      .gallery-item {
        position: relative;
      }
      .gallery-item .delete-photo-btn {
        position: absolute;
        top: 0.5rem;
        right: 0.5rem;
      }
      details > summary {
        cursor: pointer;
      }
      /* Festival Carousel Styles */
      .festival-carousel {
        padding-top: 1rem;
        padding-bottom: 3rem; /* Space for pagination */
      }
      .festival-carousel .swiper-slide {
        height: 120px; /* Consistent height for logos */
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .festival-carousel .swiper-slide img {
        max-height: 90px;
        width: auto;
        object-fit: contain;
        opacity: 0.9;
        transition: all 0.3s ease;
      }
      .festival-carousel .swiper-slide:hover img {
        opacity: 1;
        transform: scale(1.05);
      }
      .swiper-pagination-bullet-active {
        background-color: var(--primary-color) !important;
      }
      /* Community Slideshow Styles */
      .community-swiper {
        width: 100%;
      }
      .community-swiper .swiper-slide {
        position: relative;
      }
      .community-swiper .slide-admin-controls {
        position: absolute;
        top: 1rem;
        right: 1rem;
        z-index: 10;
      }
      .community-swiper .swiper-button-next,
      .community-swiper .swiper-button-prev {
        color: var(--accent-color);
        background-color: rgba(0, 0, 0, 0.3);
        border-radius: 50%;
        width: 44px;
        height: 44px;
        --swiper-navigation-size: 22px;
      }
      .community-swiper .swiper-button-next:hover,
      .community-swiper .swiper-button-prev:hover {
        background-color: rgba(0, 0, 0, 0.5);
      }
      .community-swiper .swiper-pagination {
        position: static;
        margin-top: 1rem;
      }
      /* Responsive Image container style */
      .community-image-container {
        width: 100%;
        height: 20rem; /* 320px for mobile */
        background-color: #f0f0f0; /* light gray */
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
      }
      .community-image-container img {
        width: 100%;
        height: 100%;
        object-fit: cover; /* Default to cover for mobile */
      }
      @media (min-width: 768px) {
        /* md breakpoint */
        .community-image-container {
          height: 24rem; /* 384px for desktop */
        }
        .community-image-container img {
          object-fit: contain; /* Switch to contain for desktop */
        }
      }
    </style>
  </head>
  <body class="text-gray-800">
    <header class="bg-primary shadow-lg sticky top-0 z-50">
      <nav
        class="container mx-auto px-4 sm:px-6 py-3 flex justify-between items-center"
      >
        <div class="flex items-center space-x-2 sm:space-x-4">
          <div class="w-12 h-12 sm:w-14 sm:h-14">
            <img
              src="images/logo.jpg"
              alt="Galway Jam Circle Logo"
              class="rounded-full"
            />
          </div>
          <div class="text-white text-lg sm:text-2xl font-bold tracking-tight">
            Galway Jam Circle
          </div>
        </div>
        <div class="hidden md:flex items-center space-x-2">
          <a
            href="#home"
            class="text-white px-4 py-2 rounded-md hover:bg-white/10 transition duration-300"
            >Home</a
          >
          <a
            href="#jams"
            class="text-white px-4 py-2 rounded-md hover:bg-white/10 transition duration-300"
            >Regular Jams</a
          >
          <a
            href="#format"
            class="text-white px-4 py-2 rounded-md hover:bg-white/10 transition duration-300"
            >Our Format</a
          >
          <a
            href="#special-events"
            class="text-white px-4 py-2 rounded-md hover:bg-white/10 transition duration-300"
            >Festivals & Events</a
          >
          <a
            href="#community"
            class="text-white px-4 py-2 rounded-md hover:bg-white/10 transition duration-300"
            >Community</a
          >
          <a
            href="#gallery"
            class="text-white px-4 py-2 rounded-md hover:bg-white/10 transition duration-300"
            >Gallery</a
          >
          <a
            href="https://drive.google.com/file/d/1V3X3K5hwUHxZtn3o29Wd6ZZ4twz4x0j_/view?usp=sharing"
            target="_blank"
            class="text-primary bg-accent px-4 py-3 rounded-md hover:bg-opacity-80 transition duration-300 font-bold"
            >Songbook</a
          >
          <a
            href="#contact"
            class="text-white px-4 py-2 rounded-md hover:bg-white/10 transition duration-300"
            >Contact</a
          >
        </div>
        <div class="md:hidden">
          <button id="menu-btn" class="text-white focus:outline-none">
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16m-7 6h7"
              ></path>
            </svg>
          </button>
        </div>
      </nav>
      <div id="mobile-menu" class="md:hidden hidden bg-primary/95">
        <a
          href="#home"
          class="block text-white text-center py-3 hover:bg-white/10"
          >Home</a
        >
        <a
          href="#jams"
          class="block text-white text-center py-3 hover:bg-white/10"
          >Regular Jams</a
        >
        <a
          href="#format"
          class="block text-white text-center py-3 hover:bg-white/10"
          >Our Format</a
        >
        <a
          href="#special-events"
          class="block text-white text-center py-3 hover:bg-white/10"
          >Festivals & Events</a
        >
        <a
          href="#community"
          class="block text-white text-center py-3 hover:bg-white/10"
          >Community</a
        >
        <a
          href="#gallery"
          class="block text-white text-center py-3 hover:bg-white/10"
          >Gallery</a
        >
        <a
          href="https://drive.google.com/file/d/1V3X3K5hwUHxZtn3o29Wd6ZZ4twz4x0j_/view?usp=sharing"
          target="_blank"
          class="block text-primary text-center font-bold py-3 bg-accent hover:bg-opacity-80"
          >Songbook</a
        >
        <a
          href="#contact"
          class="block text-white text-center py-3 hover:bg-white/10"
          >Contact</a
        >
      </div>
    </header>

    <main>
      <section id="home" class="relative text-white text-center">
        <img
          id="cover-photo"
          src="https://scontent-dub4-1.xx.fbcdn.net/v/t39.30808-6/340126198_1202888093755813_6375467148998027340_n.jpg?_nc_cat=105&ccb=1-7&_nc_sid=2285d6&_nc_ohc=wA-6pUbx_XYQ7kNvwHkWjV3&_nc_oc=Adnd0Bbs-9bBGiNkVlqTm636JeXERyh16eo2fUrKp5p7sPkeFMlKHcYdyTj8qGDYzQk&_nc_zt=23&_nc_ht=scontent-dub4-1.xx&_nc_gid=Pse2aOVgLI3EOs4_MVhu_Q&oh=00_AfWMKMB5g8K5fFbQO5RjBf8Wp9epHYVIZ5FuDYFFu1qEsg&oe=689D27F9"
          alt="A group of people playing instruments like guitars and ukuleles by a river in Galway."
          class="w-full h-[70vh] object-cover"
        />
        <div
          class="absolute inset-0 bg-gradient-to-t from-black/75 to-transparent flex flex-col justify-end items-center p-6 sm:p-12"
        >
          <h1
            class="text-4xl sm:text-5xl md:text-6xl font-bold text-white drop-shadow-2xl"
          >
            Welcome to the Galway Jam Circle
          </h1>
          <p
            class="mt-4 text-lg sm:text-xl max-w-3xl text-white/90 drop-shadow-xl"
          >
            A friendly, informal music-making community for all skill levels.
            Let's Jam!
          </p>
          <div
            class="mt-8 flex flex-col sm:flex-row items-center space-y-4 sm:space-y-0 sm:space-x-4"
          >
            <a
              href="#jams"
              class="px-8 py-3 bg-accent text-primary font-bold rounded-full hover:bg-opacity-80 transition duration-300 transform hover:scale-105 shadow-lg"
              >See Regular Jams</a
            >
            <div class="flex items-start space-x-4">
              <div class="text-center">
                <a
                  href="https://www.facebook.com/groups/116675615376726"
                  target="_blank"
                  class="text-white hover:text-accent transition duration-300"
                >
                  <svg
                    class="w-8 h-8 mx-auto mb-1"
                    fill="currentColor"
                    viewBox="0 0 24 24"
                    aria-hidden="true"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33V21.878A10.001 10.001 0 0022 12z"
                      clip-rule="evenodd"
                    />
                  </svg>
                  <span class="text-xs font-semibold">Group</span>
                </a>
              </div>
              <div class="text-center">
                <a
                  href="https://www.facebook.com/profile.php?id=61570031297498"
                  target="_blank"
                  class="text-white hover:text-accent transition duration-300"
                >
                  <svg
                    class="w-8 h-8 mx-auto mb-1"
                    fill="currentColor"
                    viewBox="0 0 24 24"
                    aria-hidden="true"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33V21.878A10.001 10.001 0 0022 12z"
                      clip-rule="evenodd"
                    />
                  </svg>
                  <span class="text-xs font-semibold">Page</span>
                </a>
              </div>
              <a
                href="https://www.instagram.com/galwayjamcircle42/?hl=en"
                target="_blank"
                class="text-white hover:text-accent transition duration-300 pt-1"
              >
                <svg
                  class="w-8 h-8"
                  fill="currentColor"
                  viewBox="0 0 24 24"
                  aria-hidden="true"
                >
                  <path
                    fill-rule="evenodd"
                    d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.024.06 1.378.06 3.808s-.012 2.784-.06 3.808c-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.024.048-1.378.06-3.808.06s-2.784-.012-3.808-.06c-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.048-1.024-.06-1.378-.06-3.808s.012-2.784.06-3.808c.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 016.345 2.525c.636-.247 1.363-.416 2.427-.465C9.792 2.013 10.146 2 12.315 2zm0 1.623c-2.403 0-2.748.01-3.728.058-1.006.047-1.634.21-2.203.434a3.272 3.272 0 00-1.15 1.15c-.224.57-.386 1.198-.434 2.203-.048.98-.058 1.325-.058 3.728s.01 2.748.058 3.728c.048 1.006.21 1.634.434 2.203a3.272 3.272 0 001.15 1.15c.57.224 1.198.386 2.203.434.98.048 1.325.058 3.728.058s2.748-.01 3.728-.058c1.006-.047 1.634-.21 2.203-.434a3.272 3.272 0 001.15-1.15c.224-.57.386-1.198.434-2.203.048-.98.058-1.325.058-3.728s-.01-2.748-.058-3.728c-.048-1.006-.21-1.634-.434-2.203a3.272 3.272 0 00-1.15-1.15c-.57-.224-1.198-.386-2.203-.434C15.063 3.633 14.718 3.623 12.315 3.623zM12 9.75a2.25 2.25 0 100 4.5 2.25 2.25 0 000-4.5zm0 6a3.75 3.75 0 110-7.5 3.75 3.75 0 010 7.5zM16.965 6.57a1.125 1.125 0 100 2.25 1.125 1.125 0 000-2.25z"
                    clip-rule="evenodd"
                  />
                </svg>
              </a>
            </div>
          </div>
        </div>
      </section>

      <div
        class="container mx-auto px-4 sm:px-6 text-center -mt-8 relative z-10"
      >
        <div class="admin-controls-inline items-center justify-center">
          <button
            id="edit-cover-photo-btn"
            class="px-4 py-2 bg-blue-500 text-white font-bold rounded-full hover:bg-blue-600 transition duration-300 shadow-md"
          >
            Change Cover Photo
          </button>
          <button
            class="exit-admin-btn px-4 py-2 bg-red-600 text-white font-bold rounded-full hover:bg-red-700 transition duration-300 shadow-md ml-4"
          >
            Exit Admin Mode
          </button>
        </div>
        <form
          id="edit-cover-photo-form"
          class="max-w-xl mx-auto mt-4 p-6 bg-white rounded-lg shadow-xl border border-gray-200"
        >
          <h3 class="text-xl font-bold text-primary mb-4">
            Change Cover Photo
          </h3>
          <div class="mb-4">
            <label
              for="cover-photo-url"
              class="block text-gray-700 font-bold mb-2 text-left"
              >New Photo URL</label
            >
            <input
              type="url"
              id="cover-photo-url"
              class="w-full p-2 border rounded"
              placeholder="Paste direct image link..."
            />
          </div>
          <div class="flex justify-end space-x-4">
            <button
              type="button"
              id="cancel-cover-photo-btn"
              class="px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600"
            >
              Cancel
            </button>
            <button
              type="submit"
              class="px-4 py-2 bg-primary text-white rounded-md hover:opacity-90"
            >
              Save Photo
            </button>
          </div>
        </form>
      </div>

      <section id="jams" class="py-16 md:py-20 lg:py-24 bg-white">
        <div class="container mx-auto px-4 sm:px-6">
          <div class="text-center mb-12">
            <h2
              class="text-3xl md:text-4xl lg:text-5xl font-bold text-primary mb-4"
            >
              Regular Jams
            </h2>
            <p class="text-lg text-gray-600 max-w-3xl mx-auto">
              Our weekly jam schedule. Voluntary donations are welcome to help
              cover venue costs.
            </p>

            <div class="mt-8">
              <a
                href="#"
                onclick="return false;"
                class="px-8 py-3 bg-accent text-primary font-bold rounded-full transition duration-300 shadow-lg opacity-60 cursor-not-allowed"
              >
                Contribute €5 for the Jam
              </a>
              <p class="text-sm text-gray-500 mt-2 font-semibold">
                (Payment feature coming soon - for demonstration only)
              </p>
            </div>
          </div>
          <div class="max-w-4xl mx-auto">
            <ul id="jam-list" class="space-y-4"></ul>
            <div
              class="text-center mt-8 admin-controls-inline flex-wrap justify-center gap-4"
            >
              <button
                id="add-jam-btn"
                class="px-6 py-2 bg-green-500 text-white font-bold rounded-full hover:bg-green-600 transition duration-300 shadow-md"
              >
                Add New Jam
              </button>
              <button
                id="manage-venues-btn"
                class="px-6 py-2 bg-blue-500 text-white font-bold rounded-full hover:bg-blue-600 transition duration-300 shadow-md"
              >
                Manage Venues
              </button>
              <button
                class="exit-admin-btn px-4 py-2 bg-red-600 text-white font-bold rounded-full hover:bg-red-700 transition duration-300 shadow-md"
              >
                Exit Admin Mode
              </button>
            </div>
            <form
              id="add-jam-form"
              class="mt-8 p-6 bg-gray-50/50 rounded-lg shadow-inner border"
            >
              <h3 id="form-title" class="text-xl font-bold text-primary mb-4">
                Add/Edit Jam
              </h3>
              <input type="hidden" id="edit-jam-id" />
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                <div class="md:col-span-2">
                  <label
                    for="jam-date"
                    class="block text-gray-700 font-bold mb-2 text-left"
                    >Date</label
                  ><input
                    type="text"
                    id="jam-date"
                    class="w-full p-2 border rounded"
                    placeholder="Select a date..."
                  />
                </div>
                <div>
                  <label
                    for="jam-day"
                    class="block text-gray-700 font-bold mb-2 text-left"
                    >Day</label
                  ><input
                    type="text"
                    id="jam-day"
                    class="w-full p-2 border rounded bg-gray-200"
                    readonly
                  />
                </div>
              </div>
              <div class="mb-4">
                <label
                  for="jam-time"
                  class="block text-gray-700 font-bold mb-2 text-left"
                  >Time</label
                ><input
                  type="text"
                  id="jam-time"
                  class="w-full p-2 border rounded"
                  placeholder="Select a time..."
                />
              </div>
              <div class="mb-4">
                <label
                  for="jam-venue"
                  class="block text-gray-700 font-bold mb-2 text-left"
                  >Venue</label
                ><select
                  id="jam-venue"
                  class="w-full p-2 border rounded"
                ></select>
              </div>
              <div class="mb-4">
                <label
                  for="jam-map-link"
                  class="block text-gray-700 font-bold mb-2 text-left"
                  >Google Maps Link (Optional)</label
                ><input
                  type="url"
                  id="jam-map-link"
                  class="w-full p-2 border rounded"
                  placeholder="Paste Google Maps share link..."
                />
              </div>
              <div class="flex justify-end space-x-4">
                <button
                  type="button"
                  id="cancel-btn"
                  class="px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600"
                >
                  Exit</button
                ><button
                  type="submit"
                  id="submit-btn"
                  class="px-4 py-2 bg-primary text-white rounded-md hover:opacity-90"
                >
                  Save Jam
                </button>
              </div>
            </form>
            <div
              id="venue-management-section"
              class="mt-8 p-6 bg-gray-50/50 rounded-lg shadow-inner border"
            >
              <h3 class="text-xl font-bold text-primary mb-4">Manage Venues</h3>
              <ul id="venue-list-admin" class="space-y-2 mb-4"></ul>
              <form id="add-venue-form">
                <h4 class="text-lg font-bold text-primary mb-2">
                  Add New Venue
                </h4>
                <div class="mb-2">
                  <input
                    type="text"
                    id="new-venue-name"
                    class="w-full p-2 border rounded"
                    placeholder="Venue Name"
                  />
                </div>
                <div class="mb-2">
                  <input
                    type="url"
                    id="new-venue-map-link"
                    class="w-full p-2 border rounded"
                    placeholder="Google Maps Link"
                  />
                </div>
                <button
                  type="submit"
                  class="px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600"
                >
                  Add Venue
                </button>
              </form>
            </div>
            <div class="admin-controls mt-8 border-t pt-6 border-gray-200">
              <div class="w-full">
                <h4 class="text-lg font-bold text-gray-700 mb-2">
                  Date Testing Module
                </h4>
                <p class="text-sm text-gray-600 mb-2">
                  See how the list will look on a specific date.
                </p>
                <div class="flex space-x-2">
                  <input
                    type="text"
                    id="test-date-input"
                    class="w-full p-2 border rounded"
                    placeholder="Select a test date..."
                  /><button
                    id="test-date-btn"
                    class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 whitespace-nowrap"
                  >
                    Test Date</button
                  ><button
                    id="reset-date-btn"
                    class="px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600"
                  >
                    Reset
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section
        id="format"
        class="py-16 md:py-20 lg:py-24 bg-stone-50 border-t border-stone-200"
      >
        <div class="container mx-auto px-4 sm:px-6">
          <h2
            class="text-3xl md:text-4xl lg:text-5xl font-bold text-center text-primary mb-12"
          >
            Our Jam Format
          </h2>
          <div
            class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center max-w-7xl mx-auto"
          >
            <div
              class="bg-white p-8 rounded-lg shadow-sm border border-stone-200"
            >
              <h3 class="font-bold text-xl text-primary mb-2">
                1. Loop Songs First
              </h3>
              <p class="text-gray-600">
                We begin with easy, repetitive songs to get everyone warmed up
                and in the groove.
              </p>
            </div>
            <div
              class="bg-white p-8 rounded-lg shadow-sm border border-stone-200"
            >
              <h3 class="font-bold text-xl text-primary mb-2">
                2. Four Chords or Less
              </h3>
              <p class="text-gray-600">
                Next, we move to songs that use four simple chords or fewer,
                making it easy for everyone to join in.
              </p>
            </div>
            <div
              class="bg-white p-8 rounded-lg shadow-sm border border-stone-200"
            >
              <h3 class="font-bold text-xl text-primary mb-2">
                3. Then Anything Goes!
              </h3>
              <p class="text-gray-600">
                In the final part of the jam, the floor is open! Bring out any
                song you'd like to play with the group.
              </p>
            </div>
          </div>
          <div class="max-w-4xl mx-auto mt-12">
            <details class="p-4 rounded-lg bg-white border border-stone-200">
              <summary class="font-bold text-lg text-primary">
                Jamming Guidelines
              </summary>
              <div
                class="mt-4 space-y-4 text-gray-700 text-left prose max-w-none"
              >
                <p class="italic">"Jamming's where the magic happens"</p>
                <p>
                  Jam circles are relaxed, open, inclusive gatherings of
                  musicians and singers who sit in a circle facing each other.
                  Jammers play for enjoyment rather than for audiences, but
                  listeners are welcome.
                </p>
                <p>A jam is a safe space to learn and grow jamming skills.</p>
                <p>
                  Jams are acoustic. Instruments such as bass and keyboards are
                  exceptions.
                </p>
                <p>
                  The most important skill that each Jammer brings to a jam is
                  their ability to listen.
                </p>
                <p>
                  Jammers play and harmonise during songs at a volume that
                  allows singers and soloists to be heard. If you can’t hear the
                  singer/soloist, reduce your volume.
                </p>
                <p>The jam circle flows in a clockwise direction.</p>
                <p>Jammers take turns to Play, Pass, or Pick.</p>
                <ul class="list-disc list-inside">
                  <li><strong>Play</strong> means to play a song.</li>
                  <li><strong>Pass</strong> means pass to the next jammer.</li>
                  <li>
                    <strong>Pick</strong> means pick a song that another jammer
                    plays.
                  </li>
                </ul>
                <p>
                  To keep the circle moving, Jammers ideally need to make their
                  choice in advance.
                </p>
                <p>
                  To respect the singer, Jammers avoid talking or
                  joining/leaving the circle mid-song.
                </p>
                <p>
                  When joining the circle, Jammers wait for their turn to play,
                  pass or pick, unless offered a turn.
                </p>
                <p>
                  Jam songs are “Jammable” i.e. they are fun, easy to play-
                  typically 3-4 chords, ideally in the same key.
                </p>
                <p>
                  A key feature of jam circles are solos or breaks -- where one
                  Jammer improvises a melody, for approximately a verse and/or
                  chorus.
                </p>
                <p>
                  Only one instrument solos at a time and Jammers don’t solo
                  over the singer.
                </p>
                <p>
                  Seasoned Jammers encourage less experienced to solo, giving
                  them ‘space to grow’.
                </p>
                <p>
                  The singer is the song leader. Jammers need to listen when
                  singers describe the song. Singers name the song, choose the
                  song key, its tempo, and during the song, they invite
                  musicians to solo and/or sing.
                </p>
                <p>
                  Any Jammer wishing to take a solo should make eye contact with
                  the singer, indicating their willingness to take a solo. They
                  start to solo when the singer gives them ‘the nod’.
                </p>
                <p>
                  The soloist stops the solo after a verse and/or a chorus,
                  attending to the singer’s signals.
                </p>
                <p>
                  The singer signals when the song is about to end, commonly by
                  lifting their instrument slightly, or raising a leg, or
                  saying, “one more time”.
                </p>
                <p>
                  Jammers tune quietly where possible, and avoid ‘noodling’
                  between or during songs.
                </p>
                <p>
                  When two or more bassists or percussionists are present, they
                  collaborate and/or alternate playing songs, using simple beats
                  and bass lines.
                </p>
                <p>
                  Please consider buying a drink if jam venues are provided
                  free.
                </p>
                <p>
                  Galway Jam Circle supports jamming for everyone, irrespective
                  of their age, ethnicity, culture, gender identity, religion,
                  language, sexual orientation, ability, disability or social
                  circumstances.
                </p>
                <p>
                  We use video and photography at our jam sessions and at
                  performances for social media. If you are uncomfortable with
                  this at a jam, please feel free to ask that you are not
                  filmed/photographed. At performances, please be advised that
                  we have no control over what audience members record.
                </p>
              </div>
            </details>
          </div>
          <div
            class="mt-12 text-center bg-accent/30 p-8 rounded-lg max-w-4xl mx-auto border border-amber-200"
          >
            <img
              src="images/lets_jam_logo.png"
              alt="Let's Jam Ireland Logo Placeholder"
              class="mx-auto mb-4 rounded-md h-20"
            />
            <p class="text-gray-700">
              Fuller information about the format and rules will be made
              available on the Let's Jam Ireland site when it is up and running.
            </p>
          </div>
        </div>
      </section>

      <section
        id="special-events"
        class="py-16 md:py-20 lg:py-24 bg-stone-50 border-y border-stone-200"
      >
        <div class="container mx-auto px-4 sm:px-6">
          <h2
            class="text-3xl md:text-4xl lg:text-5xl font-bold text-center text-primary mb-4"
          >
            Festivals & Special Events
          </h2>
          <p class="text-center text-lg text-gray-600 max-w-4xl mx-auto mb-12">
            We love taking part in festivals around Ireland. Here are some of
            our favourites we've been to, and hope to see again!
          </p>

          <div class="swiper festival-carousel">
            <div class="swiper-wrapper">
              <div class="swiper-slide">
                <img
                  src="images/cleggan-fringe-festival.jpg"
                  alt="Cleggan Fringe Festival Logo"
                />
              </div>
              <div class="swiper-slide">
                <img
                  src="images/doolin-folkfest-2025.png"
                  alt="Doolin FolkFest Logo"
                />
              </div>
              <div class="swiper-slide">
                <img
                  src="images/galway-folk-festival.png"
                  alt="Galway Folk Festival Logo"
                />
              </div>
              <div class="swiper-slide">
                <img
                  src="images/westport-folk-and-bluegrass-festival.jpg"
                  alt="Westport Folk and Bluegrass Festival Logo"
                />
              </div>
              <div class="swiper-slide">
                <img
                  src="images/cahersiveen-mountain-roots.jpg"
                  alt="Cahersiveen Mountain Roots Music Weekend Logo"
                />
              </div>
            </div>
            <div class="swiper-pagination"></div>
          </div>

          <div id="event-list" class="max-w-4xl mx-auto space-y-8 mt-12"></div>
          <div class="text-center mt-8 admin-controls-inline">
            <button
              id="add-event-btn"
              class="px-6 py-2 bg-green-500 text-white font-bold rounded-full hover:bg-green-600 transition duration-300 shadow-md"
            >
              Add New Event
            </button>
          </div>
          <form
            id="add-event-form"
            class="max-w-4xl mx-auto mt-8 p-6 bg-white rounded-lg shadow-inner border"
          >
            <h3
              id="event-form-title"
              class="text-xl font-bold text-primary mb-4"
            >
              Add a New Event
            </h3>
            <input type="hidden" id="edit-event-id" />
            <div class="mb-4">
              <label
                for="event-title"
                class="block text-gray-700 font-bold mb-2 text-left"
                >Title</label
              >
              <input
                type="text"
                id="event-title"
                class="w-full p-2 border rounded"
                placeholder="e.g., Cleggan Fringe Festival"
              />
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
              <div>
                <label
                  for="event-dates"
                  class="block text-gray-700 font-bold mb-2 text-left"
                  >Date(s)</label
                >
                <input
                  type="text"
                  id="event-dates"
                  class="w-full p-2 border rounded"
                  placeholder="Select a date or date range..."
                />
              </div>
              <div>
                <label
                  for="event-time"
                  class="block text-gray-700 font-bold mb-2 text-left"
                  >Time (Optional)</label
                >
                <input
                  type="text"
                  id="event-time"
                  class="w-full p-2 border rounded"
                  placeholder="e.g., 6:00 PM - 8:00 PM"
                />
              </div>
            </div>
            <div class="mb-4">
              <label
                for="event-map-link"
                class="block text-gray-700 font-bold mb-2 text-left"
                >Google Maps Link (Optional)</label
              >
              <input
                type="url"
                id="event-map-link"
                class="w-full p-2 border rounded"
                placeholder="Paste Google Maps share link..."
              />
            </div>
            <div class="mb-4">
              <label
                for="event-description"
                class="block text-gray-700 font-bold mb-2 text-left"
                >Description</label
              >
              <textarea
                id="event-description"
                class="w-full p-2 border rounded"
                rows="4"
                placeholder="Enter event details..."
              ></textarea>
            </div>
            <div class="flex justify-end space-x-4">
              <button
                type="button"
                id="cancel-event-btn"
                class="px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600"
              >
                Cancel
              </button>
              <button
                type="submit"
                id="submit-event-btn"
                class="px-4 py-2 bg-primary text-white rounded-md hover:opacity-90"
              >
                Save Event
              </button>
            </div>
          </form>
        </div>
      </section>

      <section id="community" class="py-16 md:py-20 lg:py-24 bg-white">
        <div class="container mx-auto px-4 sm:px-6">
          <h2
            class="text-3xl md:text-4xl lg:text-5xl font-bold text-center text-primary mb-4"
          >
            Community & Charity
          </h2>
          <p class="text-center text-lg text-gray-600 max-w-4xl mx-auto mb-12">
            We're proud to be part of the Galway community and support local
            causes. Here are some of the events and fundraisers we've been
            involved with.
          </p>

          <div id="community-slider-container" class="max-w-5xl mx-auto">
            <div class="swiper community-swiper">
              <div class="swiper-wrapper" id="community-swiper-wrapper"></div>
              <div class="swiper-button-next"></div>
              <div class="swiper-button-prev"></div>
              <div class="swiper-pagination"></div>
            </div>
          </div>

          <div class="text-center mt-8 admin-controls-inline">
            <button
              id="add-community-item-btn"
              class="px-6 py-2 bg-green-500 text-white font-bold rounded-full hover:bg-green-600 transition duration-300 shadow-md"
            >
              Add New Item
            </button>
          </div>

          <form
            id="add-community-form"
            class="max-w-3xl mx-auto mt-8 p-6 bg-gray-50/50 rounded-lg shadow-inner border"
          >
            <h3
              id="community-form-title"
              class="text-xl font-bold text-primary mb-4"
            >
              Add New Community/Charity Item
            </h3>
            <input type="hidden" id="edit-community-id" />
            <div class="mb-4">
              <label
                for="community-image-url"
                class="block text-gray-700 font-bold mb-2 text-left"
                >Image URL</label
              >
              <input
                type="url"
                id="community-image-url"
                class="w-full p-2 border rounded"
                placeholder="Paste direct image link..."
                required
              />
            </div>
            <div class="mb-4">
              <label
                for="community-item-type"
                class="block text-gray-700 font-bold mb-2 text-left"
                >Item Type</label
              >
              <select
                id="community-item-type"
                class="w-full p-2 border rounded"
              >
                <option value="community">Community Event</option>
                <option value="charity">Charity Fundraiser</option>
              </select>
            </div>

            <div id="community-headline-wrapper" class="mb-4 hidden">
              <label
                for="community-headline"
                class="block text-gray-700 font-bold mb-2 text-left"
                >Headline</label
              >
              <input
                type="text"
                id="community-headline"
                class="w-full p-2 border rounded"
                placeholder="e.g., Music for the Community Fair"
              />
            </div>
            <div id="charity-fields-wrapper" class="hidden">
              <div class="mb-4">
                <label
                  for="community-amount"
                  class="block text-gray-700 font-bold mb-2 text-left"
                  >Amount Raised</label
                >
                <input
                  type="text"
                  id="community-amount"
                  class="w-full p-2 border rounded"
                  placeholder="e.g., €1,200"
                />
              </div>
              <div class="mb-4">
                <label
                  for="community-charity-name"
                  class="block text-gray-700 font-bold mb-2 text-left"
                  >For (Charity Name)</label
                >
                <input
                  type="text"
                  id="community-charity-name"
                  class="w-full p-2 border rounded"
                  placeholder="e.g., COPE Galway"
                />
              </div>
            </div>

            <div class="mb-4">
              <label
                for="community-description"
                class="block text-gray-700 font-bold mb-2 text-left"
                >Description (max 40 words)</label
              >
              <textarea
                id="community-description"
                class="w-full p-2 border rounded"
                rows="3"
                placeholder="A short description of the event or fundraiser..."
                maxlength="240"
              ></textarea>
            </div>

            <div class="flex justify-end space-x-4">
              <button
                type="button"
                id="cancel-community-btn"
                class="px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600"
              >
                Cancel
              </button>
              <button
                type="submit"
                class="px-4 py-2 bg-primary text-white rounded-md hover:opacity-90"
              >
                Save Item
              </button>
            </div>
          </form>
        </div>
      </section>

      <section
        id="gallery"
        class="py-16 md:py-20 lg:py-24 bg-white border-y border-stone-200"
      >
        <div class="container mx-auto px-4 sm:px-6">
          <h2
            class="text-3xl md:text-4xl lg:text-5xl font-bold text-center text-primary mb-12"
          >
            Jam Circle Gallery
          </h2>

          <h3
            class="text-2xl md:text-3xl font-bold text-center text-primary mb-8"
          >
            Videos
          </h3>
          <div class="max-w-5xl mx-auto">
            <div class="relative" style="padding-bottom: 56.25%; height: 0">
              <iframe
                id="featured-video-player"
                class="absolute top-0 left-0 w-full h-full rounded-lg shadow-lg"
                src=""
                title="YouTube video player"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen
              ></iframe>
            </div>
          </div>
          <div class="text-center mt-8 admin-controls-inline">
            <button
              id="edit-featured-video-btn"
              class="px-4 py-2 bg-blue-500 text-white font-bold rounded-full hover:bg-blue-600 transition duration-300 shadow-md"
            >
              Change Featured Video
            </button>
          </div>
          <div class="text-center mt-8">
            <a
              href="https://youtube.com/playlist?list=PLG9xaR5hTnatoLYd337wPFrbVkjHmWErw"
              target="_blank"
              class="inline-block px-8 py-3 bg-accent text-primary font-bold rounded-full hover:bg-opacity-80 transition duration-300 shadow-md"
            >
              See our YouTube Channel
            </a>
          </div>
          <form
            id="edit-featured-video-form"
            class="max-w-xl mx-auto mt-4 p-6 bg-white rounded-lg shadow-xl border border-gray-200"
          >
            <h3 class="text-xl font-bold text-primary mb-4">
              Change Featured Video
            </h3>
            <div class="mb-4">
              <label
                for="featured-video-url"
                class="block text-gray-700 font-bold mb-2 text-left"
                >New YouTube Video URL</label
              >
              <input
                type="url"
                id="featured-video-url"
                class="w-full p-2 border rounded"
                placeholder="Paste YouTube video link..."
              />
            </div>
            <div class="flex justify-end space-x-4">
              <button
                type="button"
                id="cancel-featured-video-btn"
                class="px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600"
              >
                Cancel
              </button>
              <button
                type="submit"
                class="px-4 py-2 bg-primary text-white rounded-md hover:opacity-90"
              >
                Save Video
              </button>
            </div>
          </form>

          <h3
            class="text-2xl md:text-3xl font-bold text-center text-primary mt-16 mb-8"
          >
            Photos
          </h3>
          <div
            id="gallery-grid"
            class="grid grid-cols-2 md:grid-cols-3 gap-4"
          ></div>
          <div class="text-center mt-8 admin-controls-inline">
            <button
              id="add-photo-btn"
              class="px-6 py-2 bg-green-500 text-white font-bold rounded-full hover:bg-green-600 transition duration-300 shadow-md"
            >
              Add Photo
            </button>
          </div>
          <form
            id="add-photo-form"
            class="max-w-3xl mx-auto mt-8 p-6 bg-white rounded-lg shadow-inner border"
          >
            <h3 class="text-xl font-bold text-primary mb-4">Add New Photo</h3>
            <div class="mb-4">
              <label
                for="photo-url"
                class="block text-gray-700 font-bold mb-2 text-left"
                >Photo URL</label
              >
              <input
                type="url"
                id="photo-url"
                class="w-full p-2 border rounded"
                placeholder="Paste direct image link..."
              />
            </div>
            <div class="mb-4">
              <label
                for="photo-caption"
                class="block text-gray-700 font-bold mb-2 text-left"
                >Caption (Alt Text)</label
              >
              <input
                type="text"
                id="photo-caption"
                class="w-full p-2 border rounded"
                placeholder="e.g., Jam session by the river"
              />
            </div>
            <div class="flex justify-end space-x-4">
              <button
                type="button"
                id="cancel-photo-btn"
                class="px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600"
              >
                Cancel
              </button>
              <button
                type="submit"
                id="submit-photo-btn"
                class="px-4 py-2 bg-primary text-white rounded-md hover:opacity-90"
              >
                Save Photo
              </button>
            </div>
          </form>
        </div>
      </section>

      <section id="contact" class="py-16 md:py-20 lg:py-24 bg-white">
        <div class="container mx-auto px-4 sm:px-6 text-center">
          <h2
            class="text-3xl md:text-4xl lg:text-5xl font-bold text-center text-primary mb-4"
          >
            Join Us!
          </h2>
          <p class="text-lg text-gray-600 max-w-3xl mx-auto mb-8">
            Want to join our mailing list for updates or have a question? Get in
            touch! We'd love to hear from you.
          </p>
          <a
            href="mailto:info@galwayjamcircle.ie"
            class="px-8 py-3 bg-primary text-white font-bold rounded-full hover:opacity-90 transition duration-300 transform hover:scale-105 shadow-md"
            >Email Us</a
          >
        </div>
      </section>
    </main>

    <footer class="bg-primary text-white/80 py-8">
      <div class="container mx-auto px-6 text-center">
        <div class="flex justify-center items-start space-x-6 mb-4">
          <div class="text-center">
            <a
              href="https://www.facebook.com/groups/116675615376726"
              target="_blank"
              class="text-white hover:text-accent transition duration-300"
            >
              <svg
                class="w-6 h-6 mx-auto mb-1"
                fill="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  fill-rule="evenodd"
                  d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33V21.878A10.001 10.001 0 0022 12z"
                  clip-rule="evenodd"
                />
              </svg>
              <span class="text-xs">Group</span>
            </a>
          </div>
          <div class="text-center">
            <a
              href="https://www.facebook.com/profile.php?id=61570031297498"
              target="_blank"
              class="text-white hover:text-accent transition duration-300"
            >
              <svg
                class="w-6 h-6 mx-auto mb-1"
                fill="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  fill-rule="evenodd"
                  d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33V21.878A10.001 10.001 0 0022 12z"
                  clip-rule="evenodd"
                />
              </svg>
              <span class="text-xs">Page</span>
            </a>
          </div>
          <a
            href="https://www.instagram.com/galwayjamcircle42/?hl=en"
            target="_blank"
            class="text-white hover:text-accent transition duration-300 pt-1"
          >
            <svg
              class="w-6 h-6"
              fill="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                fill-rule="evenodd"
                d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.024.06 1.378.06 3.808s-.012 2.784-.06 3.808c-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.024.048-1.378.06-3.808.06s-2.784-.012-3.808-.06c-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.048-1.024-.06-1.378-.06-3.808s.012-2.784.06-3.808c.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 016.345 2.525c.636-.247 1.363-.416 2.427-.465C9.792 2.013 10.146 2 12.315 2zm0 1.623c-2.403 0-2.748.01-3.728.058-1.006.047-1.634.21-2.203.434a3.272 3.272 0 00-1.15 1.15c-.224.57-.386 1.198-.434 2.203-.048.98-.058 1.325-.058 3.728s.01 2.748.058 3.728c.048 1.006.21 1.634.434 2.203a3.272 3.272 0 001.15 1.15c.57.224 1.198.386 2.203.434.98.048 1.325.058 3.728.058s2.748-.01 3.728-.058c1.006-.047 1.634-.21 2.203-.434a3.272 3.272 0 001.15-1.15c.224-.57.386-1.198.434-2.203.048-.98.058-1.325.058-3.728s-.01-2.748-.058-3.728c-.048-1.006-.21-1.634-.434-2.203a3.272 3.272 0 00-1.15-1.15c-.57-.224-1.198-.386-2.203-.434C15.063 3.633 14.718 3.623 12.315 3.623zM12 9.75a2.25 2.25 0 100 4.5 2.25 2.25 0 000-4.5zm0 6a3.75 3.75 0 110-7.5 3.75 3.75 0 010 7.5zM16.965 6.57a1.125 1.125 0 100 2.25 1.125 1.125 0 000-2.25z"
                clip-rule="evenodd"
              />
            </svg>
          </a>
        </div>
        <p>© 2025 Galway Jam Circle. v1.5. All Rights Reserved.</p>
        <p class="text-sm text-stone-400 mt-2">
          Bringing music to the people of Galway.
        </p>
        <div class="space-x-4">
          <a
            href="feedback.html"
            class="text-sm text-stone-400 hover:text-white mt-4 inline-block"
            >Website Feedback</a
          >
          <a
            href="#"
            id="admin-mode-btn"
            class="text-sm text-stone-400 hover:text-white mt-4 inline-block"
            >Admin</a
          >
        </div>
      </div>
    </footer>

    <div
      id="custom-modal"
      class="fixed inset-0 bg-black/50 z-50 hidden items-center justify-center"
    >
      <div class="bg-white p-6 rounded-lg shadow-xl max-w-sm w-full mx-4">
        <p id="modal-message" class="text-lg mb-4"></p>
        <input
          type="password"
          id="modal-input"
          class="w-full p-2 border rounded mb-4 hidden"
          placeholder="Enter password..."
        />
        <div id="modal-buttons" class="flex justify-end space-x-4"></div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<button id="admin-fab" aria-label="Admin" aria-pressed="false"
  class="fixed bottom-4 right-4 px-3 py-2 rounded-full text-white shadow-lg transition
         bg-purple-800/80 hover:bg-purple-800 focus:outline-none focus:ring focus:ring-purple-300
         opacity-60 hover:opacity-100 z-50">
  Admin
</button>
<script>
(function () {
  // ----- Utilities -----
  function $(sel, root) { return (root || document).querySelector(sel); }
  function $all(sel, root) { return Array.from((root || document).querySelectorAll(sel)); }

  function getCoverSrc() {
    const cover = $('#cover-photo');
    return cover && cover.getAttribute('src') ? cover.getAttribute('src') : '';
  }

  function setImgFallback(img) {
    const fallback = getCoverSrc();
    if (!fallback) return;
    // Only apply if needed
    if (!img.getAttribute('src') || img.getAttribute('src').trim() === '' || (img.complete && img.naturalWidth === 0)) {
      img.setAttribute('src', fallback);
    }
    // Bind onerror once
    if (!img.__fallbackBound) {
      img.addEventListener('error', function () {
        // avoid infinite loop
        if (img.getAttribute('data-fallback-applied') === '1') return;
        img.setAttribute('src', fallback);
        img.setAttribute('data-fallback-applied', '1');
      }, { once: false });
      img.__fallbackBound = true;
    }
  }

  function applyFallbacks(root) {
    const scope = root || document;
    $all('img', scope).forEach(setImgFallback);
  }

  // Observe dynamically added images (e.g., gallery/community slides)
  const mo = new MutationObserver((mutations) => {
    mutations.forEach(m => {
      m.addedNodes && m.addedNodes.forEach(node => {
        if (node.nodeType === 1) { // ELEMENT_NODE
          if (node.tagName === 'IMG') {
            setImgFallback(node);
          } else {
            applyFallbacks(node);
          }
        }
      });
    });
  });

  // ----- Admin mode toggle -----
  const STORAGE_KEY = 'adminMode';
  const body = document.body;
  let adminFab = $('#admin-fab');

  function setAdminMode(enabled) {
    if (enabled) {
      body.classList.add('admin-mode');
      sessionStorage.setItem(STORAGE_KEY, '1');
      if (adminFab) {
        adminFab.textContent = 'Exit Admin';
        adminFab.setAttribute('aria-pressed', 'true');
      }
    } else {
      body.classList.remove('admin-mode');
      sessionStorage.removeItem(STORAGE_KEY);
      if (adminFab) {
        adminFab.textContent = 'Admin';
        adminFab.setAttribute('aria-pressed', 'false');
      }
    }
  }

  function toggleAdminMode() {
    const on = body.classList.contains('admin-mode');
    setAdminMode(!on);
  }

  function initAdminFab() {
    adminFab = $('#admin-fab');
    if (!adminFab) return;
    adminFab.addEventListener('click', (e) => {
      e.preventDefault();
      toggleAdminMode();
    });
  }

  function initKeyboardShortcut() {
    document.addEventListener('keydown', (e) => {
      // Ctrl+Shift+A toggles admin
      if (e.key.toLowerCase() === 'a' && e.ctrlKey && e.shiftKey) {
        e.preventDefault();
        toggleAdminMode();
      }
    });
  }

  // ----- Initialize on DOM ready -----
  document.addEventListener('DOMContentLoaded', function () {
    // apply image fallbacks immediately
    applyFallbacks();

    // start observing for dynamic changes
    try {
      mo.observe(document.documentElement || document.body, { childList: true, subtree: true });
    } catch (e) {}

    // initialize admin UI/shortcut
    initAdminFab();
    initKeyboardShortcut();

    // restore persisted admin mode
    if (sessionStorage.getItem(STORAGE_KEY) === '1') {
      setAdminMode(true);
    } else {
      setAdminMode(false);
    }
  });
})();
</script>
</body>
</html>
